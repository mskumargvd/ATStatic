import{r as a,j as e,C as B}from"./index-Djeb4-tC.js";import{l as $,B as g}from"./courseService-DIqVVEji.js";import{P as E,d as L}from"./certificateService-DBmX7_nx.js";import{S as O,T as M,B as R}from"./trending-up-B0b7WmlF.js";import{C as U}from"./clock-CuYvoFMd.js";import{A as j}from"./award-7S47aHmq.js";import{D as J}from"./download-BvJt6KVK.js";function q({onNavigate:r}){const[N,w]=a.useState({name:"Student Name",email:"student@example.com",joinDate:"2024-01-15",totalHours:0,coursesCompleted:0,certificatesEarned:0,currentStreak:0,longestStreak:0}),[n,y]=a.useState([]),[f,C]=a.useState([]),[c,k]=a.useState([]),[b,S]=a.useState([]),[v,D]=a.useState(null);a.useEffect(()=>{const s=localStorage.getItem("studentData");s&&w(JSON.parse(s));const t=[];if($().forEach(l=>{if(localStorage.getItem(`enrollment_${l.id}`)==="true"){const m=localStorage.getItem(`course_progress_${l.id}`),h=m?JSON.parse(m):{courseProgress:0,completedLessons:[],lastUpdated:0};t.push({...l,progress:h.courseProgress,completedLessons:h.completedLessons||[],isCompleted:h.courseProgress>=100,lastUpdated:h.lastUpdated||0})}}),y(t),t.length>0){const l=[...t].sort((x,m)=>(m.lastUpdated||0)-(x.lastUpdated||0));D(l[0]?.id||null)}const o=localStorage.getItem("certificates");o&&k(JSON.parse(o));const d=localStorage.getItem("recentActivity");d&&C(JSON.parse(d));const p=JSON.parse(localStorage.getItem("enrollment_receipts")||"[]");S(p.sort((l,x)=>x.ts-l.ts))},[]);const i={totalCourses:n.length,completedCourses:n.filter(s=>s.isCompleted).length,inProgressCourses:n.filter(s=>s.progress>0&&s.progress<100).length,totalHours:n.reduce((s,t)=>{const u=t.lessons.reduce((o,d)=>{const[p,l]=(d.duration||"0:00").split(":").map(Number);return o+p*60+l},0);return s+u/3600*(t.progress/100)},0),certificates:c.length},I=s=>s<1?`${Math.round(s*60)}m`:`${Math.round(s)}h`,P=s=>s>=100?"text-green-400":s>=70?"text-yellow-400":s>=30?"text-blue-400":"text-gray-400",A=s=>s>=100?"bg-green-500":s>=70?"bg-yellow-500":s>=30?"bg-blue-500":"bg-gray-500";return e.jsx("div",{className:"min-h-screen bg-slate-900 py-8",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome back, ",N.name,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-slate-400",children:"Continue your cybersecurity learning journey"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[v&&e.jsxs("button",{onClick:()=>r("video-learning")||(window.location.href=`/video-learning?course=${v}`),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),"Continue last course"]}),e.jsxs("button",{onClick:()=>r("video-learning"),className:"bg-sky-600 text-white px-6 py-3 rounded-lg hover:bg-sky-700 transition-colors flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Browse Courses"]}),e.jsx("button",{className:"bg-slate-700 text-white px-4 py-3 rounded-lg hover:bg-slate-600 transition-colors",children:e.jsx(O,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(g,{className:"w-6 h-6 text-blue-400"})}),e.jsx("span",{className:"text-2xl font-bold text-white",children:i.totalCourses})]}),e.jsx("h3",{className:"text-slate-400 text-sm",children:"Enrolled Courses"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[i.completedCourses," completed, ",i.inProgressCourses," in progress"]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(U,{className:"w-6 h-6 text-green-400"})}),e.jsx("span",{className:"text-2xl font-bold text-white",children:I(i.totalHours)})]}),e.jsx("h3",{className:"text-slate-400 text-sm",children:"Learning Hours"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total time invested"})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-500/20 rounded-lg",children:e.jsx(j,{className:"w-6 h-6 text-yellow-400"})}),e.jsx("span",{className:"text-2xl font-bold text-white",children:i.certificates})]}),e.jsx("h3",{className:"text-slate-400 text-sm",children:"Certificates"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Achievements earned"})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx(M,{className:"w-6 h-6 text-purple-400"})}),e.jsx("span",{className:"text-2xl font-bold text-white",children:N.currentStreak})]}),e.jsx("h3",{className:"text-slate-400 text-sm",children:"Day Streak"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Current learning streak"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"My Courses"}),e.jsx("button",{onClick:()=>r("video-learning"),className:"text-sky-400 hover:text-sky-300 text-sm",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-slate-400 mb-2",children:"No courses enrolled yet"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Start your learning journey by enrolling in a course"}),e.jsx("button",{onClick:()=>r("video-learning"),className:"bg-sky-600 text-white px-6 py-2 rounded-lg hover:bg-sky-700 transition-colors",children:"Browse Courses"})]}):n.map(s=>e.jsxs("div",{className:"bg-slate-700 rounded-lg p-4 hover:bg-slate-600 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-white",children:s.title}),e.jsx("div",{className:"flex items-center gap-2",children:s.isCompleted?e.jsx(B,{className:"w-5 h-5 text-green-400"}):e.jsxs("div",{className:`text-sm font-medium ${P(s.progress)}`,children:[Math.round(s.progress),"%"]})})]}),e.jsx("div",{className:"w-full bg-slate-600 rounded-full h-2 mb-3",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${A(s.progress)}`,style:{width:`${s.progress}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-400",children:[e.jsxs("span",{children:[s.lessons.length," lessons"]}),e.jsx("span",{children:s.duration})]}),e.jsx("div",{className:"mt-3 text-right",children:e.jsx("button",{onClick:()=>r("video-learning")||(window.location.href=`/video-learning?course=${s.id}`),className:"btn-primary px-4 py-2",children:"Continue watching"})})]},s.id))})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:f.length===0?e.jsx("p",{className:"text-slate-400 text-sm",children:"No recent activity"}):f.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-sky-400 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-slate-300",children:s.description}),e.jsx("span",{className:"text-slate-500 ml-auto",children:s.time})]},t))})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"My Certificates"}),e.jsxs("span",{className:"text-slate-400 text-sm",children:[c.length," total"]})]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-1",children:c.length===0?e.jsx("p",{className:"text-slate-400 text-sm",children:"No certificates yet"}):c.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-lg",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white text-sm font-medium truncate",children:s.courseName}),e.jsxs("p",{className:"text-slate-400 text-xs",children:[new Date(s.earnedDate).toLocaleDateString()," â€¢ ID: ",e.jsx("span",{className:"font-mono",children:s.certificateId})]})]}),e.jsx("button",{onClick:()=>{try{L(s.certificateId)}catch{alert("Download failed")}},className:"text-sky-400 hover:text-sky-300",title:"Download PDF",children:e.jsx(J,{className:"w-4 h-4"})})]},t))})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>r("video-learning"),className:"w-full text-left p-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors flex items-center gap-3",children:[e.jsx(g,{className:"w-5 h-5 text-sky-400"}),e.jsx("span",{className:"text-white",children:"Browse Courses"})]}),e.jsxs("button",{className:"w-full text-left p-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors flex items-center gap-3",children:[e.jsx(R,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-white",children:"View Progress"})]}),e.jsxs("button",{className:"w-full text-left p-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors flex items-center gap-3",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{className:"text-white",children:"My Certificates"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Payment Receipts"}),e.jsx("div",{className:"space-y-3",children:b.length===0?e.jsx("p",{className:"text-slate-400 text-sm",children:"No receipts yet"}):b.slice(0,5).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:s.courseId}),e.jsxs("p",{className:"text-slate-400 text-xs",children:["Order: ",e.jsx("span",{className:"font-mono",children:s.orderId})," â€¢ Payment: ",e.jsx("span",{className:"font-mono",children:s.paymentId})]})]}),e.jsx("div",{className:"text-right text-slate-400 text-xs",children:new Date(s.ts).toLocaleString()})]},t))})]})]})]})})}export{q as default};
