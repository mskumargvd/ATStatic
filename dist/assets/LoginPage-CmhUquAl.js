import{c as E,r as t,j as e,C as A,l as F,d as P}from"./index-6RvTqneP.js";import{S as v}from"./shield-eGxaVZND.js";import{C as T,R as k}from"./refresh-cw-DgB7nOWb.js";import{U as R}from"./user-CZNr8FJ-.js";import{L as V}from"./lock-j_yXakVf.js";import{E as I}from"./eye-kgoVT7pr.js";import{C as L}from"./circle-alert-BGZs3drR.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=E("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);function Q({onVerify:r,onCancel:x}){const[l,m]=t.useState("setup"),[f,g]=t.useState(""),[i,c]=t.useState(""),[o,d]=t.useState(""),[p,u]=t.useState(!1),[b,n]=t.useState(""),[j,h]=t.useState(30);t.useEffect(()=>{l==="setup"&&y()},[l]),t.useEffect(()=>{if(l==="verify"){const s=setInterval(()=>{h(a=>a<=1?(h(30),30):a-1)},1e3);return()=>clearInterval(s)}},[l]);const y=()=>{const s="JBSWY3DPEHPK3PXP",a=`otpauth://totp/AgnidhraTechnologies:student@example.com?secret=${s}&issuer=AgnidhraTechnologies`;c(s),g(a)},w=async()=>{u(!0),n("");try{await new Promise(s=>setTimeout(s,1e3)),o==="123456"?(m("success"),r?.(!0)):n("Invalid verification code")}catch{n("Verification failed. Please try again.")}finally{u(!1)}},N=()=>{h(30),n("")};return l==="setup"?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-sky-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Enable Two-Factor Authentication"}),e.jsx("p",{className:"text-slate-400",children:"Secure your account with an extra layer of protection"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Step 1: Scan QR Code"}),e.jsx("div",{className:"bg-white p-4 rounded-lg mb-4",children:e.jsx("div",{className:"w-48 h-48 bg-gray-200 rounded flex items-center justify-center mx-auto",children:e.jsx("span",{className:"text-gray-500",children:"QR Code Placeholder"})})}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Use an authenticator app like Google Authenticator or Authy"})]}),e.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Manual Entry Key:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 bg-slate-800 text-sky-400 p-2 rounded text-sm font-mono",children:i}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(i),className:"text-sky-400 hover:text-sky-300",children:"Copy"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m("verify"),className:"flex-1 bg-sky-600 text-white py-3 rounded-lg hover:bg-sky-700 transition-colors",children:"Next Step"}),e.jsx("button",{onClick:x,className:"px-6 py-3 text-slate-400 hover:text-white transition-colors",children:"Cancel"})]})]})]})}):l==="verify"?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-sky-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Verify Setup"}),e.jsx("p",{className:"text-slate-400",children:"Enter the 6-digit code from your authenticator app"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Verification Code"}),e.jsx("input",{type:"text",value:o,onChange:s=>d(s.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white text-center text-2xl font-mono focus:ring-2 focus:ring-sky-500 focus:border-sky-500",maxLength:6}),b&&e.jsxs("p",{className:"text-red-400 text-sm mt-2 flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),b]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-400",children:[e.jsxs("span",{children:["Code expires in ",j,"s"]}),e.jsxs("button",{onClick:N,className:"text-sky-400 hover:text-sky-300 flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4"}),"Resend"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:w,disabled:p||o.length!==6,className:"flex-1 bg-sky-600 text-white py-3 rounded-lg hover:bg-sky-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):"Verify & Enable"}),e.jsx("button",{onClick:()=>m("setup"),className:"px-6 py-3 text-slate-400 hover:text-white transition-colors",children:"Back"})]})]})]})}):l==="success"?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-slate-800 rounded-lg max-w-md w-full p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"2FA Enabled Successfully!"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Your account is now protected with two-factor authentication"}),e.jsx("button",{onClick:()=>r?.(!0),className:"w-full bg-sky-600 text-white py-3 rounded-lg hover:bg-sky-700 transition-colors",children:"Continue"})]})})}):null}function H({onNavigate:r,onLogin:x}){const[l,m]=t.useState({email:"",password:""}),[f,g]=t.useState(!1),[i,c]=t.useState(!1),[o,d]=t.useState(""),[p,u]=t.useState(!1),[b,n]=t.useState(null),j=s=>{const{name:a,value:C}=s.target;m(S=>({...S,[a]:C})),d("")},h=async s=>{s.preventDefault(),c(!0),d("");try{const a=await F(l.email,l.password);a.success&&(n(a.user),a.user.twoFactorEnabled?u(!0):(x?.(a.user),r("dashboard")))}catch(a){d(a.message)}finally{c(!1)}},y=async()=>{try{c(!0);const s=await P();s.success&&(x?.(s.user),r("dashboard"))}catch(s){d(s.message)}finally{c(!1)}},w=()=>{x?.(b),r("dashboard")},N=()=>{u(!1),n(null)};return e.jsxs("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-sky-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Sign in to your account"}),e.jsx("p",{className:"mt-2 text-slate-400",children:"Access your learning dashboard"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:j,className:"block w-full pl-10 pr-3 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter your email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(V,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{id:"password",name:"password",type:f?"text":"password",autoComplete:"current-password",required:!0,value:l.password,onChange:j,className:"block w-full pl-10 pr-12 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>g(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-300",children:f?e.jsx(D,{className:"h-5 w-5"}):e.jsx(I,{className:"h-5 w-5"})})]})]})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400",children:[e.jsx(L,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:o})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):"Sign in"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"bg-slate-900 px-2 text-slate-400",children:"or"})})]}),e.jsx("button",{type:"button",onClick:y,disabled:i,className:"w-full py-3 rounded-lg bg-white text-slate-800 font-semibold hover:bg-slate-100 transition-colors",children:"Continue with Google"}),e.jsxs("div",{className:"mt-6 p-4 bg-slate-800 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300 mb-2",children:"Demo Credentials:"}),e.jsxs("div",{className:"space-y-1 text-xs text-slate-400",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Admin:"})," admin@agnidhra.com / admin123"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Instructor:"})," instructor@agnidhra.com / instructor123"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Student:"})," student@agnidhra.com / student123"]})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>r("home"),className:"text-sky-400 hover:text-sky-300 text-sm",children:"← Back to Home"})})]}),p&&e.jsx(Q,{onVerify:w,onCancel:N})]})}export{H as default};
