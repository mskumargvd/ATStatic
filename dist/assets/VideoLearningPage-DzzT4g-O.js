import{c as M,r as n,u as O,j as e,C as T,a as U,b as F}from"./index-9CXnuCWm.js";import{P as _,a as B}from"./certificateService-x76K5ZH-.js";import{C as A}from"./clock-CZjB7Qkn.js";import{c as J,p as z,v as H}from"./razorpay-PhWl2zs9.js";import{B as q}from"./book-open-nuIPZ8Bb.js";import{L as Y}from"./lock-6F9-okiS.js";import{l as K}from"./courseService-zuPCpY3_.js";import{A as W}from"./arrow-left-Bf3N7_-4.js";import{A as X}from"./award-COWYp9vF.js";import{D as V}from"./download-Cuy9kHbc.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=M("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=M("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=M("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function Q({lesson:s,onProgress:v,onComplete:x,showProgress:w=!0}){const[N,g]=n.useState(!1),[h,f]=n.useState(0),[u,p]=n.useState(0),[l,d]=n.useState(1),[y,C]=n.useState(!1),[D,S]=n.useState(!1),[k,E]=n.useState(0),[L,P]=n.useState(!1),j=n.useRef(null),{enableShortcuts:I}=O();n.useEffect(()=>{const t=localStorage.getItem(`video_progress_${s.id}`);if(t){const{currentTime:i,completed:o}=JSON.parse(t);f(i),E(i/u*100),P(o)}},[s.id,u]);const $=(t,i=!1)=>{const o={currentTime:t,completed:i,timestamp:Date.now()};localStorage.setItem(`video_progress_${s.id}`,JSON.stringify(o))},a=t=>{const i=t.target.currentTime,o=t.target.duration;f(i),p(o);const b=i/o*100;E(b),Math.floor(i)%10===0&&$(i,!1),b>=90&&!L&&(P(!0),$(i,!0),x?.(s)),v?.(b)},c=()=>{P(!0),$(u,!0),x?.(s)},r=t=>{const i=Math.floor(t/60),o=Math.floor(t%60);return`${i}:${o.toString().padStart(2,"0")}`};n.useEffect(()=>{if(s.type!=="direct"||!I)return;const t=j.current;if(!t)return;const i=o=>{const b=o.target;b&&(b.tagName==="INPUT"||b.tagName==="TEXTAREA"||b.isContentEditable)||(o.code==="Space"||o.key.toLowerCase()==="k"?(o.preventDefault(),t.paused?t.play():t.pause()):o.key.toLowerCase()==="j"?t.currentTime=Math.max(0,t.currentTime-10):o.key.toLowerCase()==="l"?t.currentTime=Math.min(t.duration||t.currentTime+10,t.currentTime+10):o.key.toLowerCase()==="m"&&(t.muted=!t.muted,C(t.muted)))};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[s.type,I]);const m=()=>{switch(s.type){case"youtube":return e.jsx("iframe",{src:`https://www.youtube.com/embed/${s.videoId}?enablejsapi=1&origin=${window.location.origin}`,className:"w-full aspect-video rounded-lg bg-slate-700",allowFullScreen:!0,title:s.title});case"vimeo":return e.jsx("iframe",{src:`https://player.vimeo.com/video/${s.videoId}?title=0&byline=0&portrait=0`,className:"w-full aspect-video rounded-lg bg-slate-700",allowFullScreen:!0,title:s.title});case"direct":default:return e.jsxs("video",{className:"w-full aspect-video bg-black rounded-lg",controls:!0,onTimeUpdate:a,onLoadedMetadata:t=>p(t.target.duration),onEnded:c,onPlay:()=>g(!0),onPause:()=>g(!1),ref:j,children:[e.jsx("source",{src:s.videoUrl,type:"video/mp4"}),e.jsx("source",{src:s.videoUrl,type:"video/webm"}),"Your browser does not support the video tag."]})}};return e.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden group",children:[e.jsxs("div",{className:"relative",children:[m(),s.type==="direct"&&e.jsx("div",{className:"absolute inset-x-0 bottom-3 px-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"mx-auto max-w-[90%] bg-black/50 backdrop-blur rounded-lg px-3 py-2 flex items-center gap-3 text-white",children:[e.jsx("button",{onClick:()=>{const t=j.current;t&&(t.paused?t.play():t.pause())},className:"hover:text-sky-300",children:N?e.jsx(G,{className:"w-5 h-5"}):e.jsx(_,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{const t=j.current;t&&(t.currentTime=Math.max(0,t.currentTime-10))},className:"text-xs px-2 py-1 bg-white/10 rounded hover:bg-white/20",children:"-10s"}),e.jsx("button",{onClick:()=>{const t=j.current;t&&(t.currentTime=Math.min(t.duration||t.currentTime+10,t.currentTime+10))},className:"text-xs px-2 py-1 bg-white/10 rounded hover:bg-white/20",children:"+10s"}),e.jsxs("div",{className:"ml-auto text-xs text-slate-200",children:[r(h)," / ",r(u)]})]})}),(s.type==="youtube"||s.type==="vimeo")&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-white text-sm",children:[e.jsxs("span",{children:[r(h)," / ",r(u)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[L&&e.jsx(T,{className:"w-4 h-4 text-green-400"}),e.jsxs("span",{children:[Math.round(k),"% Complete"]})]})]}),e.jsx("div",{className:"w-full bg-slate-600 rounded-full h-1 mt-2",children:e.jsx("div",{className:"bg-sky-500 h-1 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:s.title}),e.jsx("p",{className:"text-slate-300 text-sm mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:s.duration})]}),s.difficulty&&e.jsx("span",{className:"px-2 py-1 bg-slate-700 rounded text-xs",children:s.difficulty})]})]}),L&&e.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Completed"})]})]}),s.type==="direct"&&w&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-400 mb-2",children:[e.jsxs("span",{children:["Progress: ",Math.round(k),"%"]}),e.jsxs("span",{children:[r(h)," / ",r(u)]})]}),e.jsx("div",{className:"w-full bg-slate-600 rounded-full h-2",children:e.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}),s.resources&&s.resources.length>0&&e.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Resources:"}),e.jsx("div",{className:"space-y-2",children:s.resources.map((t,i)=>e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sky-400 hover:text-sky-300 text-sm",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:t.name})]},i))})]})]})]})}function ee({course:s,onCourseComplete:v}){const[x,w]=n.useState(0),[N,g]=n.useState(0),[h,f]=n.useState(new Set),[u,p]=n.useState(!1),[l,d]=n.useState(!1),{compactLessons:y}=O(),[C,D]=n.useState(y),{notify:S}=U();n.useEffect(()=>{const a=localStorage.getItem(`course_progress_${s.id}`);if(a){const{completedLessons:r,courseProgress:m}=JSON.parse(a),t=new Set(r);f(t),g(m);const i=s.lessons.findIndex(o=>!t.has(o.id));i>0&&w(i)}const c=localStorage.getItem(`enrollment_${s.id}`);p(c==="true")},[s.id]);const k=(a,c)=>{const r={completedLessons:Array.from(a),courseProgress:c,lastUpdated:Date.now()};localStorage.setItem(`course_progress_${s.id}`,JSON.stringify(r))},E=async a=>{const c=new Set([...h,a.id]);f(c);const r=c.size/s.lessons.length*100;if(g(r),k(c,r),r>=100){try{const m=await B(s.id,"Student Name");console.log("Certificate awarded:",m),S(`Completed ${s.title}! Certificate generated.`,"success")}catch(m){console.error("Error awarding certificate:",m),S("Error generating certificate. Please try again later.","error")}v?.(s)}},L=a=>{},P=a=>a===0?!0:h.has(s.lessons[a-1].id),j=a=>{const c=Math.floor(a/3600),r=Math.floor(a%3600/60);return c>0?`${c}h ${r}m`:`${r}m`},I=s.lessons.reduce((a,c)=>{const r=c.duration||"0:00",[m,t]=r.split(":").map(Number);return a+m*60+t},0),$=async()=>{try{d(!0);const a=s.price||"Free";if(typeof a=="string"&&a.toLowerCase()==="free"){p(!0),localStorage.setItem(`enrollment_${s.id}`,"true");return}const r=Number(String(a).replace(/[^0-9.]/g,""))||0;if(r<=0){p(!0),localStorage.setItem(`enrollment_${s.id}`,"true");return}const m=await J({amount:r,currency:"INR",receipt:`${s.id}-${Date.now()}`}),t=await z({amount:m.amount,currency:m.currency,orderId:m.id,description:s.title,customerName:"Student",customerEmail:"student@example.com",customerPhone:"9999999999"});if(!await H({orderId:t.orderId,paymentId:t.paymentId,signature:t.signature}))throw new Error("Payment verification failed");p(!0),localStorage.setItem(`enrollment_${s.id}`,"true");const o=JSON.parse(localStorage.getItem("enrollment_receipts")||"[]");o.push({courseId:s.id,orderId:t.orderId,paymentId:t.paymentId,ts:Date.now()}),localStorage.setItem("enrollment_receipts",JSON.stringify(o)),S("Enrollment successful!","success")}catch(a){console.error("Enrollment failed:",a),S(a.message||"Enrollment failed. Please try again.","error")}finally{d(!1)}};return u?e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:s.title}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Course Progress"}),e.jsxs("div",{className:"text-lg font-semibold text-sky-400",children:[Math.round(N),"%"]})]})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all duration-300",style:{width:`${N}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-400",children:[e.jsxs("span",{children:[h.size," of ",s.lessons.length," lessons completed"]}),e.jsxs("span",{children:[j(I)," total duration"]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Lessons"}),e.jsx("button",{onClick:()=>D(a=>!a),className:"text-xs px-2 py-1 rounded bg-slate-700 text-slate-200 hover:bg-slate-600",children:C?"Comfortable":"Compact"})]}),e.jsx("div",{className:"space-y-2",children:s.lessons.map((a,c)=>{const r=P(c),m=h.has(a.id),t=c===x;return e.jsx("button",{onClick:()=>r&&w(c),disabled:!r,className:`w-full text-left ${C?"p-2 text-sm":"p-3"} rounded-lg transition-all duration-200 ${t?"bg-sky-600 text-white":r?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-slate-900 text-slate-500 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[m?e.jsx(T,{className:"w-5 h-5 text-green-400 flex-shrink-0"}):r?e.jsx(_,{className:"w-5 h-5 flex-shrink-0"}):e.jsx(Y,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:a.title}),!C&&e.jsx("div",{className:"text-xs opacity-75",children:a.duration})]})]})},a.id)})})]})}),e.jsx("div",{className:"lg:col-span-2",children:s.lessons[x]&&e.jsx(Q,{lesson:s.lessons[x],onProgress:L,onComplete:E})})]})]}):e.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:s.title}),e.jsx("p",{className:"text-slate-300 mb-6",children:s.description}),e.jsxs("div",{className:"bg-slate-700 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Course Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-slate-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.lessons.length," Lessons"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:j(I)})]})]})]}),e.jsx("button",{onClick:$,disabled:l,className:`bg-sky-600 text-white font-semibold px-8 py-3 rounded-lg transition-colors duration-300 ${l?"opacity-70 cursor-not-allowed":"hover:bg-sky-700"}`,children:l?"Processing...":"Enroll in Course"})]})}function me({onNavigate:s}){const[v,x]=n.useState(null),[w,N]=n.useState(new Set),[g,h]=n.useState(K()),f=F(),{notify:u}=U();n.useEffect(()=>{const d=new URLSearchParams(f.search).get("course");d&&x(d)},[f.search]);const p=l=>{N(d=>new Set([...d,l.id])),u(`You've completed ${l.title}!`,"success")};if(v){const l=g.find(d=>d.id===v);return e.jsx("div",{className:"min-h-screen bg-slate-900 py-8",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("button",{onClick:()=>x(null),className:"flex items-center gap-2 text-slate-400 hover:text-white mb-6 transition-colors",children:[e.jsx(W,{className:"w-5 h-5"}),"Back to Courses"]}),e.jsx(ee,{course:l,onCourseComplete:p})]})})}return e.jsx("div",{className:"min-h-screen bg-slate-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Video Learning Center"}),e.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto",children:"Master cybersecurity through our comprehensive video-based training programs. Learn at your own pace with expert-led content and hands-on labs."})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:g.map(l=>{const d=w.has(l.id),y=localStorage.getItem(`enrollment_${l.id}`)==="true";return e.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden hover:bg-slate-750 transition-all duration-300 transform hover:-translate-y-1",children:[e.jsxs("div",{className:"relative",children:[l.thumbnail?e.jsx("img",{src:l.thumbnail,alt:l.title,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-slate-700 animate-pulse"}),d&&e.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4"}),"Completed"]}),y&&!d&&e.jsx("div",{className:"absolute top-4 left-4 bg-sky-600 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"Enrolled"}),e.jsx("div",{className:"absolute bottom-4 left-4 bg-sky-600 text-white px-3 py-1 rounded-full text-sm font-semibold",children:l.price})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:l.title}),e.jsx("p",{className:"text-slate-300 mb-4",children:l.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.lessons.length," Lessons"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:l.duration})]})]}),e.jsx("button",{onClick:()=>x(l.id),className:`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 ${d?"bg-green-600 text-white hover:bg-green-700":y?"bg-slate-700 text-white hover:bg-slate-600":"bg-sky-600 text-white hover:bg-sky-700"}`,children:d?"Review Course":y?"Continue Learning":"Start Learning"})]})]},l.id)})}),e.jsxs("div",{className:"mt-16 max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-8",children:"Why Choose Our Video Learning?"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-sky-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Self-Paced Learning"}),e.jsx("p",{className:"text-slate-400",children:"Learn at your own speed with pause, rewind, and replay capabilities."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-sky-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(R,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Progress Tracking"}),e.jsx("p",{className:"text-slate-400",children:"Track your learning progress and earn certificates upon completion."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-sky-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Downloadable Resources"}),e.jsx("p",{className:"text-slate-400",children:"Access course materials, guides, and resources for offline study."})]})]})]})]})})}export{me as default};
